<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Centro de Ayuda - OFFSZN</title>
  
  <!-- SEO -->
  <meta name="description" content="Centro de ayuda OFFSZN - Encuentra respuestas sobre tu cuenta, productos, pagos y m√°s.">
  
  <!-- CSS -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">



  <style>
    /* Estilos espec√≠ficos para el Centro de Ayuda */
    .help-hero {
      background: radial-gradient(circle at top right, rgba(114, 9, 183, 0.08), transparent 60%);
      padding: 80px 5% 60px;
      text-align: center;
    }

    .help-hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 1rem;
      font-family: 'Montserrat', sans-serif;
      text-shadow: 0 0 10px rgba(114, 9, 183, 0.3);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .help-hero p {
      font-size: 1.1rem;
      color: #d1d1d1;
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Buscador Principal */
    .help-search-container {
      max-width: 700px;
      margin: 0 auto 3rem;
      position: relative;
    }

    .help-search-box {
      width: 100%;
      padding: 1.2rem 3.5rem 1.2rem 1.5rem;
      background: rgba(26, 10, 46, 0.4);
      border: 2px solid rgba(114, 9, 183, 0.3);
      border-radius: 15px;
      color: #fff;
      font-size: 1rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
      font-family: 'Poppins', sans-serif;
    }

    .help-search-box:focus {
      outline: none;
      border-color: #7209b7;
      background: rgba(26, 10, 46, 0.6);
      box-shadow: 0 0 20px rgba(114, 9, 183, 0.3);
    }

    .help-search-box::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .help-search-btn {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg, #7209b7, #560bad);
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 10px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .help-search-btn:hover {
      background: linear-gradient(90deg, #560bad, #3c096c);
      box-shadow: 0 0 20px rgba(114, 9, 183, 0.5);
    }

    /* Resultados de b√∫squeda */
    .search-results {
      display: none;
      max-width: 700px;
      margin: 0 auto 3rem;
      background: rgba(26, 10, 46, 0.4);
      border: 1px solid rgba(114, 9, 183, 0.3);
      border-radius: 15px;
      padding: 1.5rem;
      backdrop-filter: blur(10px);
    }

    .search-results.active {
      display: block;
    }

    .search-result-item {
      padding: 1rem;
      border-bottom: 1px solid rgba(114, 9, 183, 0.15);
      cursor: pointer;
      transition: background 0.2s;
      border-radius: 8px;
    }

    .search-result-item:last-child {
      border-bottom: none;
    }

    .search-result-item:hover {
      background: rgba(114, 9, 183, 0.1);
    }

    .search-result-title {
      color: #c9a7eb;
      font-weight: 600;
      margin-bottom: 0.3rem;
    }

    .search-result-text {
      color: #d1d1d1;
      font-size: 0.9rem;
    }

    .no-results {
      text-align: center;
      color: #999;
      padding: 2rem;
    }

    /* Accesos R√°pidos - SIN animaciones de hover agresivas */
    .help-quick-access {
      padding: 60px 5%;
      max-width: 1400px;
      margin: 0 auto;
    }

    .help-cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .help-card {
      background: rgba(26, 10, 46, 0.4);
      border: 2px solid rgba(114, 9, 183, 0.3);
      border-radius: 20px;
      padding: 2rem;
      cursor: pointer;
      transition: border-color 0.3s, box-shadow 0.3s;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .help-card:hover {
      border-color: #7209b7;
      box-shadow: 0 4px 20px rgba(114, 9, 183, 0.2);
    }

    .help-card-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, #7209b7, #560bad);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      box-shadow: 0 0 30px rgba(114, 9, 183, 0.4);
    }

    .help-card h3 {
      font-size: 1.4rem;
      margin-bottom: 0.8rem;
      color: #fff;
      font-family: 'Montserrat', sans-serif;
    }

    .help-card p {
      color: #d1d1d1;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    /* Base de Conocimiento */
    .help-knowledge-base {
      padding: 80px 5%;
      background: rgba(26, 10, 46, 0.2);
      border-top: 1px solid rgba(114, 9, 183, 0.2);
    }

    .help-kb-title {
      font-size: 2.5rem;
      margin-bottom: 3rem;
      text-align: center;
      font-weight: 800;
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      text-shadow: 0 0 10px rgba(114, 9, 183, 0.3);
    }

    .help-kb-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .help-kb-category {
      background: rgba(26, 10, 46, 0.4);
      border: 1px solid rgba(114, 9, 183, 0.3);
      border-radius: 20px;
      padding: 2rem;
      transition: border-color 0.3s;
      backdrop-filter: blur(10px);
    }

    .help-kb-category:hover {
      border-color: rgba(114, 9, 183, 0.5);
    }

    .help-kb-category h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #c9a7eb;
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
    }

    .help-kb-category p {
      color: #d1d1d1;
      margin-bottom: 1.5rem;
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .help-kb-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .help-kb-links li {
      padding: 0.8rem 0;
      border-bottom: 1px solid rgba(114, 9, 183, 0.1);
    }

    .help-kb-links li:last-child {
      border-bottom: none;
    }

    .help-kb-links a {
      color: #e9d5ff;
      text-decoration: none;
      transition: color 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.95rem;
    }

    .help-kb-links a:hover {
      color: #c9a7eb;
    }

    .help-kb-links a::before {
      content: "‚Üí";
      color: #7209b7;
      font-weight: bold;
      font-size: 1.2rem;
    }

    /* Secci√≥n de Contacto */
    .help-contact-section {
      padding: 80px 5%;
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .help-contact-section h2 {
      font-size: 2.5rem;
      color: #fff;
      margin-bottom: 1rem;
      font-family: 'Montserrat', sans-serif;
      text-shadow: 0 0 10px rgba(114, 9, 183, 0.3);
    }

    .help-contact-section p {
      color: #d1d1d1;
      margin-bottom: 2rem;
      font-size: 1.1rem;
    }

    .help-contact-email {
      display: inline-flex;
      align-items: center;
      gap: 0.8rem;
      background: rgba(26, 10, 46, 0.4);
      border: 2px solid rgba(114, 9, 183, 0.3);
      padding: 1rem 2rem;
      border-radius: 12px;
      color: #c9a7eb;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s;
      text-decoration: none;
      backdrop-filter: blur(10px);
      cursor: pointer;
      position: relative;
    }

    .help-contact-email:hover {
      border-color: #7209b7;
      background: rgba(26, 10, 46, 0.6);
    }

    /* Toast de copiado */
    .copy-toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(90deg, #7209b7, #560bad);
      color: #fff;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(114, 9, 183, 0.5);
      display: flex;
      align-items: center;
      gap: 0.8rem;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s;
      z-index: 10000;
      pointer-events: none;
    }

    .copy-toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .help-hero h1 {
        font-size: 2.5rem;
      }

      .help-cards-grid {
        grid-template-columns: 1fr;
      }

      .help-kb-grid {
        grid-template-columns: 1fr;
      }

      .help-search-container {
        padding: 0 1rem;
      }
    }

    @media (max-width: 600px) {
      .help-hero {
        padding: 60px 5% 40px;
      }

      .help-hero h1 {
        font-size: 2rem;
      }

      .help-hero p {
        font-size: 1rem;
      }

      .help-search-box {
        padding: 1rem 1rem;
        font-size: 0.9rem;
      }

      .help-search-btn {
        position: static;
        transform: none;
        width: 100%;
        margin-top: 0.5rem;
      }

      .help-kb-title {
        font-size: 1.8rem;
      }

      .help-contact-section h2 {
        font-size: 1.8rem;
      }

      .copy-toast {
        bottom: 20px;
        right: 20px;
        left: 20px;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
<!-- ==================== NAVBAR ==================== -->
<header class="navbar" id="navbar">
  <div class="logo">
    <a href="/index.html">
      <img src="/images/LOGO OFFSZN.png" alt="OFFSZN Logo" style="height: 32px; vertical-align: middle; margin-right: 8px;">
      OFFSZN
    </a>
  </div>
  
  <button class="menu-toggle" id="menuToggle" aria-label="Men√∫">
    <i class="bi bi-list"></i>
  </button>

  <div class="navbar-center">
    <ul class="navbar-links">
      <li><a href="/index.html">INICIO</a></li>
      <li class="dropdown-parent">
        <a>RECURSOS <i class="bi bi-chevron-down"></i></a>
        <div class="dropdown-menu">
          <a href="/pages/recursos/beats-instrumentales.html" class="dropdown-item" target="_blank">
            <i class="bi bi-music-note-beamed"></i>
            <span>Beats & Instrumentales</span>
          </a>
          <a href="/pages/recursos/drum-kits.html" class="dropdown-item" target="_blank">
            <i class="bi bi-disc"></i>
            <span>Drum Kits</span>
          </a>
          <a href="/pages/presets-v2.html" class="dropdown-item" target="_blank">
            <i class="bi bi-sliders"></i>
            <span>Presets & Plugins</span>
          </a>
          <a href="/pages/recursos/samples-loops.html" class="dropdown-item" target="_blank">
            <i class="bi bi-soundwave"></i>
            <span>Samples & Loops</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="/pages/recursos/recursos-gratis.html" class="dropdown-item" target="_blank">
            <i class="bi bi-gift"></i>
            <span>Recursos Gratis</span>
          </a>
        </div>
      </li>
      <li class="dropdown-parent">
        <a>COMUNIDAD <i class="bi bi-chevron-down"></i></a>
        <div class="dropdown-menu">
          <a href="/pages/comunidad/feed.html" class="dropdown-item" target="_blank">
            <i class="bi bi-house"></i>
            <span>Feed</span>
          </a>
          <a href="/pages/comunidad/productores.html" class="dropdown-item" target="_blank">
            <i class="bi bi-people"></i>
            <span>Productores</span>
          </a>
          <a href="/pages/comunidad/colaboraciones.html" class="dropdown-item" target="_blank">
            <i class="bi bi-hand-index-thumb"></i>
            <span>Colaboraciones</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="/pages/comunidad/foros.html" class="dropdown-item" target="_blank">
            <i class="bi bi-chat-dots"></i>
            <span>Foros</span>
          </a>
          <a href="/pages/comunidad/eventos.html" class="dropdown-item" target="_blank">
            <i class="bi bi-calendar-event"></i>
            <span>Eventos</span>
          </a>
        </div>
      </li>
    </ul>

    <div class="navbar-search">
      <input type="text" placeholder="Buscar beats, kits, productores...">
      <i class="bi bi-search"></i>
    </div>
  </div>

  <div class="navbar-right">
    <div class="user-actions-container"> 
        <div class="logged-out-actions"> 
            <a href="/pages/login.html" class="navbar-login-link">Iniciar Sesi√≥n</a>
            <a href="/pages/register.html" class="btn btn-join">
                √önete <i class="bi bi-rocket-takeoff"></i>
            </a>
        </div>

        <div class="user-dropdown logged-in-actions"> 
            <button class="navbar-icon-button" onclick="toggleUserDropdown(event)" title="Mi Cuenta">
                <i class="bi bi-person-check"></i>
            </button>
            
            <div class="user-dropdown-menu"> 
                <div class="user-dropdown-header">
                    <div class="user-dropdown-avatar">U</div>
                    <div class="user-dropdown-info">
                        <div class="user-dropdown-name">Usuario</div>
                        <div class="user-dropdown-email">email@offszn.com</div>
                    </div>
                </div>
                <a href="/pages/my-products.html" class="user-dropdown-item">
                    <i class="bi bi-folder"></i>
                    <span>Mis Productos</span>
                </a>
                <a href="/admin-frontend/admin-dashboard.html" class="user-dropdown-item admin-only">
                     <i class="bi bi-shield-lock"></i>
                     <span>Admin Dashboard</span>
                </a>
                <a href="#" class="user-dropdown-item">
                    <i class="bi bi-gear"></i>
                    <span>Configuraci√≥n</span>
                </a>
                <a href="#" class="user-dropdown-item logout" onclick="handleLogout(event)">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Cerrar Sesi√≥n</span>
                </a>
            </div>
        </div> 
    </div>

    <a href="/pages/cart.html" class="navbar-icon-button" title="Carrito">
        <i class="bi bi-cart3"></i>
    </a>
  </div>
</header>

<!-- ==================== HERO SECTION ==================== -->
<section class="help-hero">
  <h1>¬øEn qu√© podemos ayudarte?</h1>
  <p>Busca respuestas o explora nuestras categor√≠as de ayuda</p>
  
  <div class="help-search-container">
    <input type="text" class="help-search-box" placeholder="Escribe tu pregunta aqu√≠..." id="helpSearchInput">
    <button class="help-search-btn" onclick="searchHelp()">Buscar</button>
  </div>

  <div class="search-results" id="searchResults"></div>
</section>

<!-- ==================== ACCESOS R√ÅPIDOS ==================== -->
<section class="help-quick-access">
  <div class="help-cards-grid">
    <div class="help-card" onclick="scrollToCategory('cuenta')">
      <div class="help-card-icon">üë§</div>
      <h3>Tu Cuenta</h3>
      <p>Gestiona tu perfil, configuraci√≥n de privacidad y preferencias de OFFSZN</p>
    </div>

    <div class="help-card" onclick="scrollToCategory('productos')">
      <div class="help-card-icon">üéµ</div>
      <h3>Productos y Descargas</h3>
      <p>Informaci√≥n sobre presets, cursos y c√≥mo acceder a tus compras</p>
    </div>

    <div class="help-card" onclick="scrollToCategory('pagos')">
      <div class="help-card-icon">üí≥</div>
      <h3>Pagos y Suscripciones</h3>
      <p>Informaci√≥n sobre pagos, reembolsos y m√©todos de pago</p>
    </div>

    <div class="help-card" onclick="scrollToCategory('tecnico')">
      <div class="help-card-icon">üîß</div>
      <h3>Soporte T√©cnico</h3>
      <p>Soluciona problemas t√©cnicos con la plataforma o productos</p>
    </div>
  </div>
</section>

<!-- ==================== BASE DE CONOCIMIENTO ==================== -->
<section class="help-knowledge-base">
  <h2 class="help-kb-title">Base de Conocimiento</h2>
  
  <div class="help-kb-grid">
    <div class="help-kb-category" id="cuenta">
      <h3>üîê Tu Cuenta</h3>
      <p>Todo sobre tu cuenta y perfil en OFFSZN</p>
      <ul class="help-kb-links">
        <li><a href="#" data-question="¬øC√≥mo creo una cuenta en OFFSZN?">Crear tu cuenta</a></li>
        <li><a href="#" data-question="¬øC√≥mo recupero mi contrase√±a?">Recuperar contrase√±a</a></li>
        <li><a href="#" data-question="¬øC√≥mo edito mi perfil?">Editar tu perfil</a></li>
        <li><a href="#" data-question="¬øC√≥mo cambio mi correo electr√≥nico?">Cambiar correo electr√≥nico</a></li>
        <li><a href="#" data-question="¬øC√≥mo elimino mi cuenta?">Eliminar cuenta</a></li>
      </ul>
    </div>

    <div class="help-kb-category" id="productos">
      <h3>üéöÔ∏è Productos y Descargas</h3>
      <p>Sobre presets, cursos y recursos</p>
      <ul class="help-kb-links">
        <li><a href="#" data-question="¬øD√≥nde encuentro mis productos comprados?">Acceder a mis productos</a></li>
        <li><a href="#" data-question="¬øC√≥mo descargo mis presets?">Descargar presets</a></li>
        <li><a href="#" data-question="¬øLos presets funcionan en mi DAW?">Compatibilidad de presets</a></li>
        <li><a href="#" data-question="¬øC√≥mo instalo los presets?">Instalar presets</a></li>
        <li><a href="#" data-question="¬øPuedo compartir mis presets comprados?">Licencia de uso</a></li>
      </ul>
    </div>

    <div class="help-kb-category" id="pagos">
      <h3>üí∞ Pagos y Reembolsos</h3>
      <p>Informaci√≥n sobre transacciones y pagos</p>
      <ul class="help-kb-links">
        <li><a href="#" data-question="¬øQu√© m√©todos de pago aceptan?">M√©todos de pago</a></li>
        <li><a href="#" data-question="¬øC√≥mo uso una gift card?">Usar gift cards</a></li>
        <li><a href="#" data-question="¬øPuedo solicitar un reembolso?">Pol√≠tica de reembolsos</a></li>
        <li><a href="#" data-question="¬øPor qu√© fue rechazado mi pago?">Problemas con pagos</a></li>
        <li><a href="#" data-question="¬øD√≥nde est√° mi factura?">Descargar facturas</a></li>
      </ul>
    </div>

    <div class="help-kb-category" id="cursos">
      <h3>üìö Cursos y Aprendizaje</h3>
      <p>Todo sobre nuestros cursos de producci√≥n</p>
      <ul class="help-kb-links">
        <li><a href="#" data-question="¬øC√≥mo funcionan los cursos en vivo?">Clases en vivo</a></li>
        <li><a href="#" data-question="¬øNecesito experiencia previa?">Requisitos previos</a></li>
        <li><a href="#" data-question="¬øQu√© incluye un curso?">Contenido del curso</a></li>
        <li><a href="#" data-question="¬øPuedo ver las clases grabadas?">Acceso a grabaciones</a></li>
        <li><a href="#" data-question="¬øC√≥mo agendo una clase?">Agendar clases</a></li>
      </ul>
    </div>

    <div class="help-kb-category" id="tecnico">
      <h3>üõ†Ô∏è Soporte T√©cnico</h3>
      <p>Soluciona problemas t√©cnicos</p>
      <ul class="help-kb-links">
        <li><a href="#" data-question="Problemas de inicio de sesi√≥n">No puedo iniciar sesi√≥n</a></li>
        <li><a href="#" data-question="Error al descargar">No puedo descargar mis productos</a></li>
        <li><a href="#" data-question="Preset suena diferente">El preset no suena igual</a></li>
        <li><a href="#" data-question="Problemas de carga">El sitio no carga correctamente</a></li>
        <li><a href="#" data-question="Errores de pago">Error durante el pago</a></li>
      </ul>
    </div>

    <div class="help-kb-category" id="politicas">
      <h3>üìã Pol√≠ticas y T√©rminos</h3>
      <p>Lee nuestras pol√≠ticas y t√©rminos</p>
      <ul class="help-kb-links">
        <li><a href="/pages/terminos-de-servicio.html" target="_blank">T√©rminos de servicio</a></li>
        <li><a href="/pages/terminos-de-uso.html" target="_blank">T√©rminos de uso</a></li>
        <li><a href="/pages/politica-de-privacidad.html" target="_blank">Pol√≠tica de privacidad</a></li>
        <li><a href="#" data-question="¬øCu√°les son los derechos de autor?">Derechos de autor</a></li>
        <li><a href="#" data-question="¬øPuedo usar los presets comercialmente?">Uso comercial</a></li>
      </ul>
    </div>
  </div>
</section>

<!-- ==================== CONTACTO ==================== -->
<section class="help-contact-section">
  <h2>¬øNo encuentras lo que buscas?</h2>
  <p>Cont√°ctanos directamente y te ayudaremos lo antes posible</p>
  
  <div class="help-contact-email" onclick="copyEmail()">
    <i class="bi bi-envelope-fill"></i>
    offszn.studio@gmail.com
    <i class="bi bi-clipboard" style="margin-left: 0.5rem; font-size: 0.9rem;"></i>
  </div>
  <p style="font-size: 0.85rem; color: #999; margin-top: 0.8rem;">Haz clic para copiar</p>
</section>

<!-- Toast de copiado -->
<div class="copy-toast" id="copyToast">
  <i class="bi bi-check-circle-fill" style="font-size: 1.5rem;"></i>
  <span>Email copiado al portapapeles</span>
</div>

<!-- ==================== FOOTER ==================== -->
<footer class="footer">
  <div class="footer-content">
    <p>¬© 2025 OFFSZN</p>
    <ul>
      <li><a href="/pages/politica-de-privacidad.html" target="_blank">Pol√≠tica de Privacidad</a></li>
      <li><a href="/pages/terminos-de-uso.html" target="_blank">T√©rminos de Uso</a></li>
      <li><a href="/pages/terminos-de-servicio.html" target="_blank">T√©rminos de Servicio</a></li>
      <li><a href="/pages/contacto.html" target="_blank">Contacto</a></li>
    </ul>
    <div class="footer-social">
      <a href="https://wa.link/t89kep" target="_blank" rel="noopener noreferrer" title="WhatsApp">
        <i class="bi bi-whatsapp"></i>
      </a>
      <a href="https://www.instagram.com/willieinspired/" target="_blank" rel="noopener noreferrer" title="Instagram">
        <i class="bi bi-instagram"></i>
      </a>
      <a href="https://www.youtube.com/@willieinspired" target="_blank" rel="noopener noreferrer" title="YouTube">
        <i class="bi bi-youtube"></i>
      </a>
    </div>
  </div>
</footer>
<!-- /* chatbot */ -->
<div class="chat-icon" id="chatIcon">
  üí¨
</div>

<div class="chat-menu" id="chatMenu">
  <div class="chat-menu-header">
      <h3>Habla con nosotros üëã</h3>
      <p>¬°Hola! Env√≠anos un mensaje con tus preguntas. ¬°Estamos encantados de ayudarte!</p>
  </div>
  <div class="chat-menu-body">
      <button id="startChatButton" class="menu-button-primary">Volver al chat</button>
      <h4>Respuestas inmediatas</h4>
      <button class="predefined-question">Necesito hablar con un asesor</button>
      <button class="predefined-question">Quiero saber sobre pagos</button>
      <button class="predefined-question">¬øC√≥mo se entregan los archivos de los presets?</button>
      <button class="predefined-question">¬øC√≥mo puedo acceder a mis cursos?</button>
  </div>
  <button id="closeMenuButton" class="menu-close-button">X</button>
</div>

<div class="chat-window" id="chatWindow">
  <div class="chat-header">
      <h3>OFFSZN bot</h3>
      <button id="closeChat">X</button>
  </div>
  <div class="chat-body" id="chatBody">
      <div class="message bot">¬°Hola! Soy tu asistente virtual. ¬øEn qu√© puedo ayudarte hoy?</div>
  </div>
  <div class="chat-footer">
      <input type="text" id="chatInput" placeholder="Escribe un mensaje...">
      <button id="sendButton">Enviar</button>
  </div>
</div>

<script src="script/chatbot-ui.js" defer></script>
<!-- /* fin del chatbot  -->

<!-- ==================== SCRIPTS ==================== -->
<script src="/script/menu.js"></script>

<script>
// ========== BASE DE CONOCIMIENTOS COMPLETA ==========
const knowledgeBase = {
  // CUENTA
  "¬øC√≥mo creo una cuenta en OFFSZN?": "Para crear una cuenta, haz clic en '√önete' en la esquina superior derecha y completa el formulario de registro con tu email y contrase√±a. Recibir√°s un correo de confirmaci√≥n.",
  "¬øC√≥mo recupero mi contrase√±a?": "En la p√°gina de inicio de sesi√≥n, haz clic en '¬øOlvidaste tu contrase√±a?' e ingresa tu email. Te enviaremos un enlace seguro para resetearla en los pr√≥ximos minutos.",
  "¬øC√≥mo edito mi perfil?": "Ve a tu cuenta haciendo clic en el √≠cono de usuario en la esquina superior derecha, luego selecciona 'Configuraci√≥n' para editar tu informaci√≥n personal, foto de perfil y preferencias.",
  "¬øC√≥mo cambio mi correo electr√≥nico?": "En Configuraci√≥n > Cuenta, encontrar√°s la opci√≥n para actualizar tu direcci√≥n de email. Necesitar√°s confirmar el cambio desde tu correo actual.",
  "¬øC√≥mo elimino mi cuenta?": "Cont√°ctanos a offszn.studio@gmail.com para solicitar la eliminaci√≥n de tu cuenta. Ten en cuenta que esto es permanente y perder√°s acceso a todos tus productos.",
  
  // PRODUCTOS Y DESCARGAS
  "¬øD√≥nde encuentro mis productos comprados?": "Accede a 'Mis Productos' desde el men√∫ de tu cuenta (√≠cono de usuario). Ah√≠ encontrar√°s todos los presets, cursos y recursos que has comprado, listos para descargar.",
  "¬øC√≥mo descargo mis presets?": "En 'Mis Productos', haz clic en el bot√≥n de descarga junto al preset que desees. El archivo se descargar√° en formato ZIP. Si tienes problemas, actualiza la p√°gina o cont√°ctanos.",
  "¬øLos presets funcionan en mi DAW?": "Nuestros presets est√°n optimizados para FL Studio y usan plugins de Waves. Tambi√©n incluimos versiones con plugins nativos cuando es posible. Revisa la descripci√≥n de cada producto para confirmar compatibilidad.",
  "¬øC√≥mo instalo los presets?": "Descarga el archivo ZIP, descompr√≠melo y copia los archivos a la carpeta de presets de tu DAW. Para FL Studio: col√≥calos en la carpeta 'Mixer presets'. Incluimos instrucciones detalladas en cada descarga.",
  "¬øPuedo compartir mis presets comprados?": "No. Los presets tienen licencia de uso personal. No puedes redistribuirlos, revenderlos ni compartirlos. Son solo para tu uso en tus propias producciones musicales.",
  
  // PAGOS Y REEMBOLSOS
  "¬øQu√© m√©todos de pago aceptan?": "Aceptamos PayPal, tarjetas de cr√©dito/d√©bito (Visa, Mastercard, American Express) y Yape (solo Per√∫). Todos los pagos son procesados de forma segura.",
  "¬øC√≥mo uso una gift card?": "Durante el proceso de compra, ingresa el c√≥digo de tu gift card en el campo 'C√≥digo de descuento'. El saldo se aplicar√° autom√°ticamente a tu compra.",
  "¬øPuedo solicitar un reembolso?": "Ofrecemos reembolsos dentro de las primeras 24 horas solo si hay problemas t√©cnicos con el producto que no podamos resolver. Los productos digitales no son reembolsables una vez descargados.",
  "¬øPor qu√© fue rechazado mi pago?": "Los pagos pueden rechazarse por fondos insuficientes, datos incorrectos o problemas con tu banco. Verifica tu informaci√≥n e intenta de nuevo. Si el problema persiste, cont√°ctanos.",
  "¬øD√≥nde est√° mi factura?": "Las facturas se env√≠an autom√°ticamente a tu email despu√©s de cada compra. Tambi√©n puedes descargarlas desde 'Mis Productos' > 'Historial de compras'.",
  
  // CURSOS Y APRENDIZAJE
  "¬øC√≥mo funcionan los cursos en vivo?": "Los cursos son clases personalizadas 100% en vivo por videollamada (Zoom, Meet o Teams). Cada sesi√≥n dura 40-60 minutos. Trabajamos directamente en tu proyecto desde la primera clase.",
  "¬øNecesito experiencia previa?": "No es necesario. Los cursos se adaptan a tu nivel, desde principiante hasta intermedio. Yo ajusto cada clase seg√∫n tu experiencia y objetivos espec√≠ficos.",
  "¬øQu√© incluye un curso?": "Cada curso incluye: clases en vivo personalizadas, grabaci√≥n de todas las sesiones, feedback en tiempo real sobre tu m√∫sica, acceso a presets exclusivos y soporte por WhatsApp entre clases.",
  "¬øPuedo ver las clases grabadas?": "S√≠, todas las clases quedan grabadas y las recibes despu√©s de cada sesi√≥n. Puedes verlas las veces que necesites para repasar el contenido.",
  "¬øC√≥mo agendo una clase?": "Despu√©s de comprar un curso, te contactaremos por email y WhatsApp para coordinar horarios. Agendamos las clases seg√∫n tu disponibilidad y zona horaria.",
  
  // SOPORTE T√âCNICO
  "Problemas de inicio de sesi√≥n": "Verifica que est√©s usando el email y contrase√±a correctos. Si olvidaste tu contrase√±a, usa la opci√≥n 'Recuperar contrase√±a'. Limpia el cach√© de tu navegador si el problema persiste.",
  "Error al descargar": "Aseg√∫rate de estar logueado en tu cuenta. Prueba con otro navegador o desactiva temporalmente tu bloqueador de anuncios. Si el problema contin√∫a, escr√≠benos a offszn.studio@gmail.com.",
  "Preset suena diferente": "Verifica que tengas los mismos plugins instalados. Los presets necesitan las versiones espec√≠ficas de plugins mencionadas en la descripci√≥n. Algunos efectos pueden sonar diferente seg√∫n tu configuraci√≥n.",
  "Problemas de carga": "Intenta limpiar el cach√© del navegador (Ctrl+Shift+Del) o usa otro navegador. Verifica tu conexi√≥n a internet. Si usas VPN, prueba desactiv√°ndola.",
  "Errores de pago": "Si ves un error al pagar, verifica que tus datos sean correctos. Intenta con otro m√©todo de pago. Si el problema persiste, cont√°ctanos y te ayudaremos a completar la compra manualmente.",
  
  // POL√çTICAS
  "¬øCu√°les son los derechos de autor?": "Todo el contenido de OFFSZN (presets, cursos, samples) est√° protegido por derechos de autor. Puedes usar los productos en tus canciones, pero no puedes redistribuirlos ni revenderlos.",
  "¬øPuedo usar los presets comercialmente?": "S√≠, puedes usar los presets en tus producciones comerciales sin problemas. Lo que NO puedes hacer es vender o redistribuir los presets mismos como productos independientes."
};

// ========== COPIAR EMAIL AL PORTAPAPELES ==========
function copyEmail() {
  const email = 'offszn.studio@gmail.com';
  
  // Usar la API moderna del portapapeles
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(email).then(() => {
      showCopyToast();
    }).catch(err => {
      console.error('Error al copiar:', err);
      fallbackCopyEmail(email);
    });
  } else {
    fallbackCopyEmail(email);
  }
}

// M√©todo alternativo para navegadores antiguos
function fallbackCopyEmail(email) {
  const textArea = document.createElement('textarea');
  textArea.value = email;
  textArea.style.position = 'fixed';
  textArea.style.left = '-999999px';
  document.body.appendChild(textArea);
  textArea.select();
  
  try {
    document.execCommand('copy');
    showCopyToast();
  } catch (err) {
    console.error('Error al copiar:', err);
    alert('Email: ' + email);
  }
  
  document.body.removeChild(textArea);
}

// Mostrar toast de confirmaci√≥n
function showCopyToast() {
  const toast = document.getElementById('copyToast');
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
  }, 3000);
}

// ========== FUNCIONES DE B√öSQUEDA ==========
function searchHelp() {
  const searchInput = document.getElementById('helpSearchInput');
  const searchResults = document.getElementById('searchResults');
  const query = searchInput.value.trim().toLowerCase();
  
  if (!query) {
    searchResults.classList.remove('active');
    return;
  }
  
  // Buscar en la base de conocimientos
  const results = [];
  
  for (const [question, answer] of Object.entries(knowledgeBase)) {
    const questionLower = question.toLowerCase();
    const answerLower = answer.toLowerCase();
    
    if (questionLower.includes(query) || answerLower.includes(query)) {
      results.push({ question, answer });
    }
  }
  
  // Mostrar resultados
  if (results.length > 0) {
    let html = '<div style="margin-bottom: 1rem;"><strong style="color: #c9a7eb;">Encontramos ' + results.length + ' resultado' + (results.length > 1 ? 's' : '') + ':</strong></div>';
    
    results.forEach(result => {
      const preview = result.answer.length > 120 ? result.answer.substring(0, 120) + '...' : result.answer;
      html += `
        <div class="search-result-item" onclick="showAnswer('${result.question.replace(/'/g, "\\'")}')">
          <div class="search-result-title">${result.question}</div>
          <div class="search-result-text">${preview}</div>
        </div>
      `;
    });
    searchResults.innerHTML = html;
    searchResults.classList.add('active');
  } else {
    searchResults.innerHTML = `
      <div class="no-results">
        <i class="bi bi-search" style="font-size: 3rem; color: #7209b7; margin-bottom: 1rem;"></i>
        <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">No encontramos resultados para "<strong>${query}</strong>"</p>
        <p style="font-size: 0.9rem; color: #999; margin-top: 1rem;">Intenta con otras palabras clave o explora las categor√≠as abajo</p>
        <div style="margin-top: 1.5rem;">
          <button onclick="clearSearch()" style="background: rgba(114, 9, 183, 0.2); border: 1px solid rgba(114, 9, 183, 0.5); color: #c9a7eb; padding: 0.6rem 1.5rem; border-radius: 8px; cursor: pointer; margin-right: 0.5rem;">
            <i class="bi bi-arrow-left"></i> Volver
          </button>
          <button onclick="copyEmail()" style="background: linear-gradient(90deg, #7209b7, #560bad); border: none; color: #fff; padding: 0.6rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
            <i class="bi bi-envelope-fill"></i> Cont√°ctanos
          </button>
        </div>
      </div>
    `;
    searchResults.classList.add('active');
  }
}

// Buscar al presionar Enter
document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.getElementById('helpSearchInput');
  if (searchInput) {
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        searchHelp();
      }
    });
  }
  
  // Agregar eventos a los enlaces de la base de conocimientos
  const kbLinks = document.querySelectorAll('.help-kb-links a[data-question]');
  kbLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const question = link.getAttribute('data-question');
      showAnswer(question);
    });
  });
});

// ========== MOSTRAR RESPUESTA ==========
function showAnswer(question) {
  const answer = knowledgeBase[question];
  if (!answer) return;
  
  // Scroll al inicio suave
  window.scrollTo({ top: 0, behavior: 'smooth' });
  
  // Mostrar respuesta en el √°rea de resultados
  const searchResults = document.getElementById('searchResults');
  searchResults.innerHTML = `
    <div style="padding: 1rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
        <i class="bi bi-question-circle-fill" style="font-size: 2.5rem; color: #7209b7; flex-shrink: 0;"></i>
        <h3 style="color: #c9a7eb; margin: 0; font-size: 1.3rem; line-height: 1.3;">${question}</h3>
      </div>
      <div style="background: rgba(114, 9, 183, 0.1); padding: 1.5rem; border-radius: 10px; border-left: 4px solid #7209b7;">
        <p style="color: #e9d5ff; line-height: 1.8; margin: 0; font-size: 1rem;">${answer}</p>
      </div>
      <div style="margin-top: 1.5rem; display: flex; gap: 0.8rem; flex-wrap: wrap; justify-content: center;">
        <button onclick="clearSearch()" style="background: rgba(114, 9, 183, 0.2); border: 1px solid rgba(114, 9, 183, 0.5); color: #c9a7eb; padding: 0.7rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.2s;">
          <i class="bi bi-arrow-left"></i> Volver a buscar
        </button>
        <button onclick="copyEmail()" style="background: linear-gradient(90deg, #7209b7, #560bad); border: none; color: #fff; padding: 0.7rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s;">
          <i class="bi bi-envelope-fill"></i> ¬øNecesitas m√°s ayuda?
        </button>
      </div>
    </div>
  `;
  searchResults.classList.add('active');
}

// ========== LIMPIAR B√öSQUEDA ==========
function clearSearch() {
  const searchResults = document.getElementById('searchResults');
  const searchInput = document.getElementById('helpSearchInput');
  searchResults.classList.remove('active');
  searchInput.value = '';
  searchInput.focus();
}

// ========== SCROLL A CATEGOR√çA ==========
function scrollToCategory(categoryId) {
  const category = document.getElementById(categoryId);
  if (category) {
    const offset = 100;
    const elementPosition = category.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - offset;
    
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
    
    // Efecto visual sutil
    category.style.borderColor = '#7209b7';
    setTimeout(() => {
      category.style.borderColor = '';
    }, 1500);
  }
}

// ========== USER DROPDOWN ==========
function toggleUserDropdown(event) {
  event.stopPropagation();
  const dropdown = document.querySelector('.user-dropdown');
  if (dropdown) {
    dropdown.classList.toggle('active');
  }
}

// Cerrar dropdown al hacer clic fuera
document.addEventListener('click', (e) => {
  const userDropdown = document.querySelector('.user-dropdown');
  if (userDropdown && !userDropdown.contains(e.target)) {
    userDropdown.classList.remove('active');
  }
});

// ========== LOGOUT ==========
function handleLogout(event) {
  event.preventDefault();
  if (confirm('¬øEst√°s seguro que deseas cerrar sesi√≥n?')) {
    localStorage.removeItem('authToken');
    localStorage.removeItem('offszn_user_cache');
    localStorage.removeItem('offszn_giftcards_state');
    window.location.href = '/pages/login.html';
  }
}

// ========== VERIFICAR AUTENTICACI√ìN ==========
document.addEventListener('DOMContentLoaded', () => {
  const token = localStorage.getItem('authToken');
  const body = document.body;
  
  if (token) {
    body.classList.add('user-logged-in');
    
    // Cargar datos del usuario si est√°n en cach√©
    const cachedUser = localStorage.getItem('offszn_user_cache');
    if (cachedUser) {
      try {
        const userData = JSON.parse(cachedUser);
        
        // Actualizar nombre en dropdown
        const dropdownName = document.querySelector('.user-dropdown-name');
        const dropdownEmail = document.querySelector('.user-dropdown-email');
        const dropdownAvatar = document.querySelector('.user-dropdown-avatar');
        
        if (dropdownName) {
          dropdownName.textContent = userData.nickname || userData.first_name || 'Usuario';
        }
        if (dropdownEmail) {
          dropdownEmail.textContent = userData.email || '';
        }
        if (dropdownAvatar) {
          const initial = (userData.first_name || userData.nickname || 'U').charAt(0).toUpperCase();
          dropdownAvatar.textContent = initial;
        }
        
        // Mostrar admin dashboard si es admin
        if (userData.role === 'admin') {
          body.classList.add('user-is-admin');
        }
      } catch (e) {
        console.error('Error al cargar datos del usuario:', e);
      }
    }
  } else {
    body.classList.remove('user-logged-in');
  }
});

console.log('‚úÖ Centro de Ayuda OFFSZN - Versi√≥n optimizada cargada');
</script>

</body>
</html>
